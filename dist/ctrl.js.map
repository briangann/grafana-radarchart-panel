{"version":3,"sources":["../src/ctrl.js"],"names":["getColorForValue","data","value","i","thresholds","length","colorMap","_","first","MetricsPanelCtrl","$","kbn","config","TimeSeries","d3","panelDefaults","fontSizes","fontTypes","unitFormats","getUnitFormats","operatorNameOptions","valueMaps","op","text","mappingTypes","name","rangeMaps","from","to","mappingType","colors","decimals","format","operatorName","radar","w","h","margin","top","right","bottom","left","levels","maxValue","labelFactor","wrapWidth","opacityArea","dotRadius","opacityCircles","strokeWidth","roundStrokes","radarRadius","D3RadarChartPanelCtrl","$scope","$injector","alertSrv","defaults","panel","radarDivId","id","containerDivId","scoperef","alertSrvRef","initialized","panelContainer","svgContainer","panelWidth","panelHeight","radarObject","valueFormatted","valueRounded","series","events","on","onInitEditMode","bind","onDataReceived","onDataError","panels","grafanaBootData","settings","thisPanel","pluginId","thisPanelPath","baseUrl","optionsPath","addEditorTab","container","viewPortWidth","Math","max","document","documentElement","clientWidth","window","innerWidth","pixelsPerSpan","trueWidth","round","span","tmpPanelHeight","ctrl","height","row","replace","actualHeight","parseInt","setValues","panelTitleOffset","title","getPanelWidthBySpan","getPanelHeight","width","undefined","tmpradarRadius","parseFloat","xdata","axis","opt","color","scale","category10","svgWidth","svgHeight","clearRadarChart","drawRadarChart","editMode","changeView","editPanel","fullscreen","exitFullscreen","viewPanel","map","index","indexOf","splice","render","push","rangeMap","scope","elem","attrs","radarByClass","find","append","childNodes","setContainer","forceRender","renderRadar","renderingCompleted","isNumber","scaledDecimals","delta","dec","floor","log","LN10","magn","pow","norm","size","result","flotpairs","error","Error","message","JSON","stringify","lastPoint","last","datapoints","lastValue","isArray","alias","isString","escape","stats","decimalInfo","getDecimalsForValue","formatFunc","valueFormats","roundValue","scopedVars","__name","label","j","subItem","err","dataList","seriesHandler","updateRadarChart","seriesData","target","getFlotPairs","nullPointMode","tmp","templateUrl"],"mappings":"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","file":"ctrl.js","sourcesContent":["import {MetricsPanelCtrl} from 'app/plugins/sdk';\nimport _ from 'lodash';\nimport $ from 'jquery';\nimport kbn from 'app/core/utils/kbn';\nimport config from 'app/core/config';\nimport TimeSeries from 'app/core/time_series2';\n//import * as d3 from '../bower_components/d3/d3.js';\nimport * as d3 from './external/d3.v3.min';\n//import * as irdc from './external/D3ImprovedRadarChart/D3ImprovedRadarChart';\n//import displayRADAR from './external/radarChart';\nimport './external/updating-radar-chart/radarChart';\n//import './external/D3ImprovedRadarChart/Library/d3-legend-new.min';\nimport './external/d3-svg-legend/d3-legend.min';\nimport './css/panel.css!';\nimport './external/d3radar';\n\nconst panelDefaults = {\n  fontSizes: [4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58,60,62,64,66,68,70],\n  fontTypes: [\n    'Arial', 'Avant Garde', 'Bookman',\n    'Consolas', 'Courier', 'Courier New',\n    'Garamond', 'Helvetica', 'Open Sans',\n    'Palatino', 'Times', 'Times New Roman',\n    'Verdana'\n  ],\n  unitFormats: kbn.getUnitFormats(),\n  operatorNameOptions: ['min','max','avg', 'current', 'total', 'name'],\n  valueMaps: [\n    { value: 'null', op: '=', text: 'N/A' }\n  ],\n  mappingTypes: [\n    {name: 'value to text', value: 1},\n    {name: 'range to text', value: 2},\n  ],\n  rangeMaps: [\n    { from: 'null', to: 'null', text: 'N/A' }\n  ],\n  mappingType: 1,\n  thresholds: '',\n  colors: [\"rgba(245, 54, 54, 0.9)\", \"rgba(237, 129, 40, 0.89)\", \"rgba(50, 172, 45, 0.97)\"],\n  decimals: 2, // decimal precision\n  format: 'none', // unit format\n  operatorName: 'avg', // operator applied to time series\n  radar: {\n    w: 600,\t\t\t\t//Width of the circle\n    h: 600,\t\t\t\t//Height of the circle\n    margin: {top: 20, right: 20, bottom: 20, left: 20}, //The margins of the SVG\n    levels: 3,\t\t\t\t//How many levels or inner circles should be drawn\n    maxValue: 0, \t\t\t//What is the value that the biggest circle will represent\n    labelFactor: 1.25, \t//How much farther than the radius of the outer circle should the labels be placed\n    wrapWidth: 60, \t\t//The number of pixels after which a label needs to be given a new line\n    opacityArea: 0.35, \t//The opacity of the area of the blob\n    dotRadius: 4, \t\t\t//The size of the colored circles of each blog\n    opacityCircles: 0.1, \t//The opacity of the circles of each blob\n    strokeWidth: 2, \t\t//The width of the stroke around each blob\n    roundStrokes: false,\t//If true the area and stroke will follow a round path (cardinal-closed)\n    radarRadius: 0, // 0 for autosize\n  },\n};\n\nclass D3RadarChartPanelCtrl extends MetricsPanelCtrl {\n\n  constructor($scope, $injector, alertSrv) {\n    super($scope, $injector);\n    // merge existing settings with our defaults\n    _.defaults(this.panel, panelDefaults);\n    this.panel.radarDivId = 'd3radar_svg_' + this.panel.id;\n    this.containerDivId = 'container_'+this.panel.radarDivId;\n    this.scoperef = $scope;\n    this.alertSrvRef = alertSrv;\n    this.initialized = false;\n    this.panelContainer = null;\n    this.panel.svgContainer = null;\n    this.panelWidth = null;\n    this.panelHeight = null;\n    this.radarObject = null;\n    this.data = {\n      value: 0,\n      valueFormatted: 0,\n      valueRounded: 0\n    };\n    this.series = [];\n    this.events.on('init-edit-mode', this.onInitEditMode.bind(this));\n    this.events.on('data-received', this.onDataReceived.bind(this));\n    this.events.on('data-error', this.onDataError.bind(this));\n    this.events.on('data-snapshot-load', this.onDataReceived.bind(this));\n  }\n\n  // this is called ONCE when the edit button is selected.\n  // if the page is loaded initially on this page, we don't get a render\n  // called, need a way to fix this scenario\n  //\n  onInitEditMode() {\n    // determine the path to this plugin\n    var panels = grafanaBootData.settings.panels;\n    var thisPanel = panels[this.pluginId];\n    var thisPanelPath = thisPanel.baseUrl + '/';\n    // add the relative path to the partial\n    var optionsPath = thisPanelPath + 'partials/editor.options.html';\n    this.addEditorTab('Options', optionsPath, 2);\n  }\n\n  /**\n   * [setContainer description]\n   * @param {[type]} container [description]\n   */\n  setContainer(container) {\n    this.panelContainer = container;\n    this.panel.svgContainer = container;\n  }\n\n  // determine the width of a panel by the span and viewport\n  getPanelWidthBySpan() {\n    var viewPortWidth = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);\n    // get the pixels of a span\n    var pixelsPerSpan = viewPortWidth / 12;\n    // multiply num spans by pixelsPerSpan\n    var trueWidth = Math.round(this.panel.span * pixelsPerSpan);\n    return trueWidth;\n  }\n\n  getPanelHeight() {\n      // panel can have a fixed height via options\n      var tmpPanelHeight = this.$scope.ctrl.panel.height;\n      // if that is blank, try to get it from our row\n      if (typeof tmpPanelHeight === 'undefined') {\n        // get from the row instead\n        tmpPanelHeight = this.row.height;\n        // default to 250px if that was undefined also\n        if (typeof tmpPanelHeight === 'undefined') {\n          tmpPanelHeight = 250;\n        }\n      }\n      else {\n        // convert to numeric value\n        tmpPanelHeight = tmpPanelHeight.replace(\"px\",\"\");\n      }\n      var actualHeight = parseInt(tmpPanelHeight);\n      // grafana minimum height for a panel is 250px\n      if (actualHeight < 250) {\n        actualHeight = 250;\n      }\n      return actualHeight;\n  }\n\n  renderRadar() {\n    // update the values to be sent to the radar constructor\n    this.setValues(this.data);\n    // Check if there is a \"title\" and offset size of radar accordingly\n    var panelTitleOffset = 0;\n    if (this.panel.title !== \"\") {\n      panelTitleOffset = 25;\n    }\n    this.panelWidth = this.getPanelWidthBySpan();\n    this.panelHeight = this.getPanelHeight() - panelTitleOffset;\n    var margin = {top: 0, right: 0, bottom: 0, left: 10};\n    var width = this.panelWidth;\n    var height = this.panelHeight;\n\n    // check which is smaller, the height or the width and set the radius to be half of the lesser\n    if (this.panel.radar.radarRadius === undefined) {\n      this.panel.radar.radarRadius = 0;\n    }\n\n    var tmpradarRadius = parseFloat(this.panel.radar.radarRadius);\n    // autosize if radius is set to zero\n    if (this.panel.radar.radarRadius === 0) {\n      tmpradarRadius = this.panelHeight / 2;\n      if (this.panelWidth < this.panelHeight) {\n        tmpradarRadius = this.panelWidth / 2;\n      }\n      tmpradarRadius -= 10;\n    }\n\n    var xdata = [\n                  [//iPhone\n                  {axis:\"Battery Life\",value:0.22},\n                  {axis:\"Brand\",value:0.28},\n                  {axis:\"Contract Cost\",value:0.29},\n                  {axis:\"Design And Quality\",value:0.17},\n                  {axis:\"Have Internet Connectivity\",value:0.22},\n                  {axis:\"Large Screen\",value:0.02},\n                  {axis:\"Price Of Device\",value:0.21},\n                  {axis:\"To Be A Smartphone\",value:0.50}\n                  ],[//Samsung\n                  {axis:\"Battery Life\",value:0.27},\n                  {axis:\"Brand\",value:0.16},\n                  {axis:\"Contract Cost\",value:0.35},\n                  {axis:\"Design And Quality\",value:0.13},\n                  {axis:\"Have Internet Connectivity\",value:0.20},\n                  {axis:\"Large Screen\",value:0.13},\n                  {axis:\"Price Of Device\",value:0.35},\n                  {axis:\"To Be A Smartphone\",value:0.38}\n                  ],[//Nokia Smartphone\n                  {axis:\"Battery Life\",value:0.26},\n                  {axis:\"Brand\",value:0.10},\n                  {axis:\"Contract Cost\",value:0.30},\n                  {axis:\"Design And Quality\",value:0.14},\n                  {axis:\"Have Internet Connectivity\",value:0.22},\n                  {axis:\"Large Screen\",value:0.04},\n                  {axis:\"Price Of Device\",value:0.41},\n                  {axis:\"To Be A Smartphone\",value:0.30}\n                  ]\n                ];\n\n    var opt = {\n      w: width,\t\t\t\t//Width of the circle\n      h: height,\t\t\t\t//Height of the circle\n      margin: this.panel.radar.margin, //The margins of the SVG\n      levels: this.panel.radar.levels,\t\t\t\t//How many levels or inner circles should be drawn\n      maxValue: this.panel.radar.maxValue, \t\t\t//What is the value that the biggest circle will represent\n      labelFactor: this.panel.radar.labelFactor, \t//How much farther than the radius of the outer circle should the labels be placed\n      wrapWidth: this.panel.radar.wrapWidth, \t\t//The number of pixels after which a label needs to be given a new line\n      opacityArea: this.panel.radar.opacityArea, \t//The opacity of the area of the blob\n      dotRadius: this.panel.radar.dotRadius, \t\t\t//The size of the colored circles of each blog\n      opacityCircles: this.panel.radar.opacityCircles, \t//The opacity of the circles of each blob\n      strokeWidth: this.panel.radar.strokeWidth, \t\t//The width of the stroke around each blob\n      roundStrokes: this.panel.radar.roundStrokes,\t//If true the area and stroke will follow a round path (cardinal-closed)\n      color: d3.scale.category10(),\t//Color function\n      svgWidth: width,\n      svgHeight: height,\n      containerDivId: this.containerDivId,\n      data: xdata,\n    };\n    // check if there is an object already and remove it\n    if (this.radarObject !== null) {\n      this.radarObject.clearRadarChart();\n    }\n    this.radarObject = new drawRadarChart(opt);\n  }\n\n  // this is likely a bug in grafana, when entering inside edit mode,\n  // we do not get a render. force back to non-edit mode one time.\n  forceRender() {\n    if (this.editMode) {\n      this.changeView(false,true);\n      this.editPanel();\n    }\n    else {\n      if (this.fullscreen) {\n        this.exitFullscreen();\n        this.viewPanel();\n      }\n      else {\n        this.viewPanel();\n        this.exitFullscreen();\n      }\n    }\n  }\n  removeValueMap(map) {\n    var index = _.indexOf(this.panel.valueMaps, map);\n    this.panel.valueMaps.splice(index, 1);\n    this.render();\n  }\n\n  addValueMap() {\n    this.panel.valueMaps.push({value: '', op: '=', text: '' });\n  }\n\n  removeRangeMap(rangeMap) {\n    var index = _.indexOf(this.panel.rangeMaps, rangeMap);\n    this.panel.rangeMaps.splice(index, 1);\n    this.render();\n  }\n\n  addRangeMap() {\n    this.panel.rangeMaps.push({from: '', to: '', text: ''});\n  }\n\n  link(scope, elem, attrs, ctrl) {\n    var radarByClass = elem.find('.grafana-d3-radarchart');\n    //debugger;\n    radarByClass.append('<div id=\"'+ctrl.containerDivId+'\"></div>');\n    var container = radarByClass[0].childNodes[0];\n    ctrl.setContainer(container);\n    this.forceRender();\n    function render(){\n    \t\tctrl.renderRadar();\n    }\n    this.events.on('render', function() {\n\t\t\trender();\n\t\t\tctrl.renderingCompleted();\n\t  });\n  }\n\n\n  getDecimalsForValue(value) {\n    if (_.isNumber(this.panel.decimals)) {\n      return {decimals: this.panel.decimals, scaledDecimals: null};\n    }\n\n    var delta = value / 2;\n    var dec = -Math.floor(Math.log(delta) / Math.LN10);\n\n    var magn = Math.pow(10, -dec),\n        norm = delta / magn, // norm is between 1.0 and 10.0\n        size;\n\n    if (norm < 1.5) {\n      size = 1;\n    } else if (norm < 3) {\n      size = 2;\n      // special case for 2.5, requires an extra decimal\n      if (norm > 2.25) {\n        size = 2.5;\n        ++dec;\n      }\n    } else if (norm < 7.5) {\n      size = 5;\n    } else {\n      size = 10;\n    }\n\n    size *= magn;\n\n    // reduce starting decimals if not needed\n    if (Math.floor(value) === value) { dec = 0; }\n\n    var result = {};\n    result.decimals = Math.max(0, dec);\n    result.scaledDecimals = result.decimals - Math.floor(Math.log(size) / Math.LN10) + 2;\n    return result;\n  }\n\n  setValues(data) {\n    data.flotpairs = [];\n    if (this.series.length > 1) {\n      var error = new Error();\n      error.message = 'Multiple Series Error';\n      error.data = 'Metric query returns ' + this.series.length +\n        ' series. Single Stat Panel expects a single series.\\n\\nResponse:\\n'+JSON.stringify(this.series);\n      throw error;\n    }\n\n    if (this.series && this.series.length > 0) {\n      var lastPoint = _.last(this.series[0].datapoints);\n      var lastValue = _.isArray(lastPoint) ? lastPoint[0] : null;\n\n      if (this.panel.operatorName === 'name') {\n        data.value = 0;\n        data.valueRounded = 0;\n        data.valueFormatted = this.series[0].alias;\n      } else if (_.isString(lastValue)) {\n        data.value = 0;\n        data.valueFormatted = _.escape(lastValue);\n        data.valueRounded = 0;\n      } else {\n        data.value = this.series[0].stats[this.panel.operatorName];\n        data.flotpairs = this.series[0].flotpairs;\n        var decimalInfo = this.getDecimalsForValue(data.value);\n        var formatFunc = kbn.valueFormats[this.panel.format];\n        data.valueFormatted = formatFunc(data.value, decimalInfo.decimals, decimalInfo.scaledDecimals);\n        data.valueRounded = kbn.roundValue(data.value, decimalInfo.decimals);\n      }\n\n      // Add $__name variable for using in prefix or postfix\n      data.scopedVars = {\n        __name: {\n          value: this.series[0].label\n        }\n      };\n    }\n\n    // check value to text mappings if its enabled\n    if (this.panel.mappingType === 1) {\n      for (var i = 0; i < this.panel.valueMaps.length; i++) {\n        var map = this.panel.valueMaps[i];\n        // special null case\n        if (map.value === 'null') {\n          if (data.value === null || data.value === void 0) {\n            data.valueFormatted = map.text;\n            return;\n          }\n          continue;\n        }\n\n        // value/number to text mapping\n        var value = parseFloat(map.value);\n        if (value === data.valueRounded) {\n          data.valueFormatted = map.text;\n          return;\n        }\n      }\n    } else if (this.panel.mappingType === 2) {\n      for (var j = 0; j < this.panel.rangeMaps.length; j++) {\n        var rangeMap = this.panel.rangeMaps[j];\n        // special null case\n        if (rangeMap.from === 'null' && rangeMap.to === 'null') {\n          if (data.value === null || data.value === void 0) {\n            data.valueFormatted = rangeMap.text;\n            return;\n          }\n          continue;\n        }\n\n        // value/number to range mapping\n        var from = parseFloat(rangeMap.from);\n        var to = parseFloat(rangeMap.to);\n        if (to >= data.valueRounded && from <= data.valueRounded) {\n          data.valueFormatted = rangeMap.text;\n          return;\n        }\n      }\n    }\n\n    if (data.value === null || data.value === void 0) {\n      data.valueFormatted = \"no value\";\n    }\n  }\n\n  getValueText() {\n    return this.data.valueFormatted;\n  }\n\n  getValueRounded() {\n    return this.data.valueRounded;\n  }\n\n  setUnitFormat(subItem) {\n    this.panel.format = subItem.value;\n    this.render();\n  }\n\n  onDataError(err) {\n    this.onDataReceived([]);\n  }\n\n  onDataReceived(dataList) {\n    this.series = dataList.map(this.seriesHandler.bind(this));\n    var data = {};\n    this.setValues(data);\n    this.data = data;\n    if(this.radarObject !== null) {\n      this.radarObject.updateRadarChart(data.value, data.valueFormatted, data.valueRounded);\n    } else {\n      // render radar\n      this.render();\n    }\n  }\n\n  seriesHandler(seriesData) {\n    var series = new TimeSeries({\n      datapoints: seriesData.datapoints,\n      alias: seriesData.target,\n    });\n    series.flotpairs = series.getFlotPairs(this.panel.nullPointMode);\n    return series;\n  }\n\n  invertColorOrder() {\n    var tmp = this.panel.colors[0];\n    this.panel.colors[0] = this.panel.colors[2];\n    this.panel.colors[2] = tmp;\n    this.render();\n  }\n}\n\nfunction getColorForValue(data, value) {\n  for (var i = data.thresholds.length; i > 0; i--) {\n    if (value >= data.thresholds[i-1]) {\n      return data.colorMap[i];\n    }\n  }\n  return _.first(data.colorMap);\n}\n\nD3RadarChartPanelCtrl.templateUrl = 'partials/template.html';\nexport {\n\tD3RadarChartPanelCtrl,\n\tD3RadarChartPanelCtrl as MetricsPanelCtrl\n};\n"]}